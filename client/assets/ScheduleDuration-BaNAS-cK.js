import{w as A}from"./with-props-DbFBUsUC.js";import{r as l,l as e}from"./chunk-K6CSEXPM-DdwNiGzb.js";import{c as D,b as S,f as C}from"./firebaseConfig-BRVrc43n.js";import{g as L}from"./index-e84cf44d-CdAT_r-a.js";const _=A(function(){var b;const[x,u]=l.useState(""),[g,h]=l.useState([]),[a,o]=l.useState(null),[c,y]=l.useState(""),[f,m]=l.useState(!0),[j,N]=l.useState(!0);l.useEffect(()=>{o(null),u(""),h([]),m(!0)},[c]),l.useEffect(()=>{const s=L().onAuthStateChanged(n=>{n?y(n.uid):console.log("User not logged in"),N(!1)});return()=>s()},[]),l.useEffect(()=>{c&&(async()=>{try{m(!0);const s=D(S,"client_web",c,"ads_client"),d=(await C(s)).docs.map(i=>{const r=i.data(),w=v(r.createdAt,r.expiryDate);return{id:i.id,...r,duration:w,companyName:r.companyName||"No company name",address:r.address||"No address",adFileUrl:r.adFileUrl||"",createdAt:r.createdAt||null,expiryDate:r.expiryDate||null}});h(d)}catch(s){console.error("Error fetching ads:",s)}finally{m(!1)}})()},[c]);const v=(t,s)=>{const n=t==null?void 0:t.toDate(),d=s!=null&&s.seconds?new Date(s.seconds*1e3):null;if(!n||!d)return"N/A";const i=Math.abs(d-n);return`${Math.ceil(i/(1e3*3600*24))} days`},p=g.filter(t=>(t.companyName||"").toLowerCase().includes(x.toLowerCase())),k=t=>{o(t)};return j?e.jsx("div",{className:"bg-gray-100 min-h-screen p-5 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xl",children:"Checking authentication..."})})}):f?e.jsx("div",{className:"bg-gray-100 min-h-screen p-5 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xl",children:"Loading your advertisements..."})})}):e.jsxs("div",{className:"bg-gray-100 min-h-screen p-5",children:[e.jsx("header",{className:"flex justify-center items-center bg-gray-900 text-white p-5 rounded-lg shadow-md",children:e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Schedule & Duration"})}),e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-md mt-5",children:[e.jsx("input",{type:"text",placeholder:"Search by Company Name...",value:x,onChange:t=>u(t.target.value),className:"w-full p-3 border border-gray-400 rounded mb-4 text-black shadow-sm"}),e.jsx("h3",{className:"text-lg font-semibold text-black mb-3",children:"List of Uploaded Ads"}),e.jsxs("div",{className:"grid grid-cols-6 gap-2 bg-gray-200 p-3 rounded-lg font-semibold text-black",children:[e.jsx("span",{children:"Company Name"}),e.jsx("span",{children:"Video Ad"}),e.jsx("span",{children:"Location"}),e.jsx("span",{children:"Schedule"}),e.jsx("span",{children:"Expiry"}),e.jsx("span",{children:"Duration"})]}),e.jsx("ul",{className:"space-y-3 mt-2",children:p.length===0?e.jsx("p",{className:"p-4 text-center text-gray-500",children:"No ads found for your account."}):p.map(t=>{var s;return e.jsxs("li",{className:"grid grid-cols-6 gap-2 p-4 rounded-lg shadow-md bg-white hover:bg-gray-100 transition-all cursor-pointer items-center",onClick:()=>k(t),children:[e.jsx("span",{className:"font-bold text-black truncate",children:t.companyName}),e.jsx("span",{className:"text-black",children:t.adFileUrl?e.jsx("a",{href:t.adFileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",onClick:n=>n.stopPropagation(),children:"View"}):"N/A"}),e.jsx("span",{className:"text-black truncate",children:t.address}),e.jsx("span",{className:"text-black",children:((s=t.createdAt)==null?void 0:s.toDate().toLocaleDateString())||"N/A"}),e.jsx("span",{className:"text-black",children:t.expiryDate?new Date(t.expiryDate.seconds*1e3).toLocaleDateString():"N/A"}),e.jsx("span",{className:"text-black",children:t.duration})]},t.id)})})]}),a&&e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-md mt-5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-black",children:"Advertisement Details"}),e.jsx("button",{onClick:()=>o(null),className:"text-gray-500 hover:text-gray-700",children:"Close"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),e.jsx("input",{type:"text",value:a.companyName,readOnly:!0,className:"w-full p-3 border border-gray-300 rounded bg-gray-50 text-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Video URL"}),e.jsx("input",{type:"text",value:a.adFileUrl,readOnly:!0,className:"w-full p-3 border border-gray-300 rounded bg-gray-50 text-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("input",{type:"text",value:a.address,readOnly:!0,className:"w-full p-3 border border-gray-300 rounded bg-gray-50 text-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload Date"}),e.jsx("input",{type:"text",value:((b=a.createdAt)==null?void 0:b.toDate().toLocaleString())||"N/A",readOnly:!0,className:"w-full p-3 border border-gray-300 rounded bg-gray-50 text-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),e.jsx("input",{type:"text",value:a.expiryDate?new Date(a.expiryDate.seconds*1e3).toLocaleString():"N/A",readOnly:!0,className:"w-full p-3 border border-gray-300 rounded bg-gray-50 text-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration"}),e.jsx("input",{type:"text",value:a.duration,readOnly:!0,className:"w-full p-3 border border-gray-300 rounded bg-gray-50 text-black"})]})]}),a.adFileUrl&&e.jsx("div",{className:"mt-4",children:e.jsx("a",{href:a.adFileUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"View Full Ad"})})]})]})});export{_ as default};
