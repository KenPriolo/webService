import{w as N}from"./with-props-DbFBUsUC.js";import{p as f,r,l as e}from"./chunk-K6CSEXPM-DdwNiGzb.js";import{c as j,f as D,d as w,b,u as k}from"./firebaseConfig-BRVrc43n.js";import{C as S}from"./calendar-check-BtGBE9vp.js";import"./index-e84cf44d-CdAT_r-a.js";import"./createLucideIcon-CD_6Kii1.js";const T=N(function(){f();const[i,y]=r.useState(""),[x,m]=r.useState([]),[s,u]=r.useState(null),[p,c]=r.useState("");r.useEffect(()=>{(async()=>{const d=j(b,"ads"),o=(await D(d)).docs.map(a=>({id:a.id,client:a.data().companyName,location:a.data().address,date:new Date(a.data().createdAt.seconds*1e3).toLocaleDateString(),expiry:a.data().expiryDate?new Date(a.data().expiryDate.seconds*1e3).toLocaleDateString():"N/A",duration:a.data().expiryDate?`${Math.ceil((a.data().expiryDate.seconds*1e3-a.data().createdAt.seconds*1e3)/(1e3*60*60*24))} days`:"N/A"}));m(o)})()},[]);const l=t=>{u(t),c(t.duration)},g=async()=>{const t=parseInt(p);if(isNaN(t)||t<=0){alert("Please enter a valid duration.");return}const d=s.expiryDate?new Date(s.expiryDate.seconds*1e3):new Date(s.date),n=new Date(d.getTime()+t*24*60*60*1e3),o=w(b,"ads",s.id);await k(o,{expiryDate:n}),u({...s,expiry:n.toLocaleDateString()}),m(x.map(a=>a.id===s.id?{...a,expiry:n.toLocaleDateString(),duration:`${t} days`}:a)),c(""),alert("Duration updated successfully!")},h=x.filter(t=>t.client.toLowerCase().includes(i.toLowerCase()));return e.jsxs("div",{className:"bg-gray-100 min-h-screen p-5",children:[e.jsxs("header",{className:"flex justify-center items-center bg-gray-900 text-white p-5 rounded-lg shadow-md",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Schedule & Duration"}),e.jsx(S,{size:32})]}),e.jsx("input",{type:"text",placeholder:"Search by client name...",value:i,onChange:t=>y(t.target.value),className:"w-full p-3 border border-gray-400 rounded my-4 text-black shadow-sm"}),e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold text-black mb-3",children:"Scheduled Advertisements"}),e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-blue-500 text-white",children:[e.jsx("th",{className:"p-3 text-left",children:"Client Name"}),e.jsx("th",{className:"p-3 text-left",children:"Location"}),e.jsx("th",{className:"p-3 text-left",children:"Scheduled Date"}),e.jsx("th",{className:"p-3 text-left",children:"Expiry"}),e.jsx("th",{className:"p-3 text-left",children:"Duration"})]})}),e.jsx("tbody",{children:h.length>0?h.map(t=>e.jsxs("tr",{className:"border-b hover:bg-gray-100 cursor-pointer",children:[e.jsx("td",{className:"p-3 text-black",onClick:()=>l(t),children:t.client}),e.jsx("td",{className:"p-3 text-black",onClick:()=>l(t),children:t.location}),e.jsx("td",{className:"p-3 text-black",onClick:()=>l(t),children:t.date}),e.jsx("td",{className:"p-3 text-black",onClick:()=>l(t),children:t.expiry}),e.jsx("td",{className:"p-3 text-black",onClick:()=>l(t),children:t.duration})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center font-bold p-4 text-black",children:"No schedules match your search."})})})]})]}),s&&e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-md mt-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-black",children:"Edit Schedule Duration"}),e.jsx("label",{className:"block text-black font-medium mt-3",children:"Client Name"}),e.jsx("input",{type:"text",value:s.client,readOnly:!0,className:"w-full p-3 border border-gray-400 rounded mt-2 bg-gray-100 text-black"}),e.jsx("label",{className:"block text-black font-medium mt-3",children:"Location"}),e.jsx("input",{type:"text",value:s.location,readOnly:!0,className:"w-full p-3 border border-gray-400 rounded mt-2 bg-gray-100 text-black"}),e.jsx("label",{className:"block text-black font-medium mt-3",children:"Scheduled Date"}),e.jsx("input",{type:"text",value:s.date,readOnly:!0,className:"w-full p-3 border border-gray-400 rounded mt-2 bg-gray-100 text-black"}),e.jsx("label",{className:"block text-black font-medium mt-3",children:"Expiry Date"}),e.jsx("input",{type:"text",value:s.expiry,readOnly:!0,className:"w-full p-3 border border-gray-400 rounded mt-2 bg-gray-100 text-black"}),e.jsx("label",{className:"block text-black font-medium mt-3",children:"New Duration"}),e.jsx("input",{type:"text",placeholder:"New Duration (e.g., 10 days)",value:p,onChange:t=>c(t.target.value),className:"w-full p-3 border border-gray-400 rounded mt-2 text-black bg-white"}),e.jsx("button",{onClick:g,className:"mt-4 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition cursor-pointer w-full",children:"Update Duration"})]})]})});export{T as default};
