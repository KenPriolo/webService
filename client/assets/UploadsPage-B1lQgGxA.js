import{w as N}from"./with-props-DbFBUsUC.js";import{p as w,r,l as e}from"./chunk-K6CSEXPM-DdwNiGzb.js";import{c as A,f as v,d as k,b as p,j as D}from"./firebaseConfig-BRVrc43n.js";import"./index-e84cf44d-CdAT_r-a.js";const P=N(function(){var c;w();const[d,m]=r.useState(""),[n,o]=r.useState([]),[x,h]=r.useState([]),[C,u]=r.useState(new Date),[a,g]=r.useState(null);r.useEffect(()=>{(async()=>{const l=A(p,"ads"),j=(await v(l)).docs.map(i=>({id:i.id,...i.data()}));o(j)})()},[]),r.useEffect(()=>{const t=setInterval(()=>{u(new Date)},6e4);return()=>clearInterval(t)},[]);const b=n.filter(t=>(t.companyName||"").toLowerCase().includes(d.toLowerCase())),y=t=>{g(t)},f=async t=>{const l=n.find(s=>s.id===t);h([...x,l]),o(n.filter(s=>s.id!==t));try{const s=k(p,"ads",t);await D(s)}catch(s){console.error("Error deleting ad from Firestore: ",s)}};return e.jsxs("div",{className:"bg-gray-100 min-h-screen p-5",children:[e.jsx("header",{className:"flex justify-center items-center bg-gray-900 text-white p-5 rounded-lg shadow-md",children:e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Uploaded Advertisements"})}),e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-md mt-5",children:[e.jsx("input",{type:"text",placeholder:"Search by Company Name...",value:d,onChange:t=>m(t.target.value),className:"w-full p-3 border border-gray-400 rounded mb-4 text-black shadow-sm"}),e.jsx("h3",{className:"text-lg font-semibold text-black mb-3",children:"List of Uploaded Ads"}),e.jsxs("div",{className:"grid grid-cols-6 gap-2 bg-gray-200 p-3 rounded-lg font-semibold text-black",children:[e.jsx("span",{children:"Company Name"}),e.jsx("span",{children:"Video Ad"}),e.jsx("span",{children:"Location"}),e.jsx("span",{children:"Schedule"}),e.jsx("span",{children:"Expiry"}),e.jsx("span",{children:"Actions"})]}),e.jsx("ul",{className:"space-y-3 mt-2",children:b.map(t=>{var l;return e.jsxs("li",{className:"grid grid-cols-6 gap-2 p-4 rounded-lg shadow-md bg-white hover:bg-gray-200 transition-all cursor-pointer items-center",onClick:()=>y(t),children:[e.jsx("span",{className:"font-bold text-black",children:t.companyName}),e.jsx("span",{className:"text-black",children:t.adFileUrl?"Video":"N/A"}),e.jsx("span",{className:"text-black",children:t.address||"Unknown"}),e.jsxs("span",{className:"text-black",children:[e.jsx("strong",{children:"Start:"})," ",((l=t.createdAt)==null?void 0:l.toDate().toLocaleString())||"N/A"]}),e.jsxs("span",{className:"text-black",children:[e.jsx("strong",{children:"Expiry:"})," ",t.expiryDate?new Date(t.expiryDate.seconds*1e3).toLocaleString():"N/A"]}),e.jsx("button",{onClick:s=>{s.stopPropagation(),f(t.id)},className:"bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 transition cursor-pointer",children:"Delete"})]},t.id)})})]}),a&&e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-md mt-5",children:[e.jsx("h3",{className:"text-lg font-semibold text-black",children:"Advertisement Details"}),e.jsx("input",{type:"text",value:a.companyName,readOnly:!0,className:"w-full p-3 border border-gray-400 rounded mt-2 bg-gray-200 text-black"}),e.jsx("input",{type:"text",value:a.adFileUrl,readOnly:!0,className:"w-full p-3 border border-gray-400 rounded mt-2 bg-gray-200 text-black"}),e.jsx("input",{type:"text",value:a.address,readOnly:!0,className:"w-full p-3 border border-gray-400 rounded mt-2 bg-gray-200 text-black"}),e.jsx("input",{type:"text",value:(c=a.createdAt)==null?void 0:c.toDate().toLocaleString(),readOnly:!0,className:"w-full p-3 border border-gray-400 rounded mt-2 bg-gray-200 text-black"}),e.jsx("input",{type:"text",value:a.expiryDate?new Date(a.expiryDate.seconds*1e3).toLocaleString():"N/A",readOnly:!0,className:"w-full p-3 border border-gray-400 rounded mt-2 bg-gray-200 text-black"})]})]})});export{P as default};
