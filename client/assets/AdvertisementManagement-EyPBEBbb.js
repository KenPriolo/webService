import{w}from"./with-props-DbFBUsUC.js";import{r as l,l as e}from"./chunk-K6CSEXPM-DdwNiGzb.js";import{u as j}from"./SidebarContext-CXUqV7HX.js";import{c as N,b as A,T as S,e as C}from"./firebaseConfig-BRVrc43n.js";import{g as k}from"./index-e84cf44d-CdAT_r-a.js";const I=w(function(){const{isCollapsed:g}=j(),[d,n]=l.useState(""),[i,c]=l.useState(null),[r,u]=l.useState(""),[o,p]=l.useState(""),[s,m]=l.useState(!1),h=()=>{const a=k().currentUser;return a?a.uid:null},x=async()=>{const t=h();if(!t){alert("Please log in to submit an advertisement.");return}if(d&&i&&r&&o)try{m(!0);const a=new FormData;a.append("file",i),a.append("upload_preset","yp3oxvpp"),a.append("resource_type","video"),a.append("chunk_size","6000000");const b=await fetch("https://api.cloudinary.com/v1_1/dafdsqf6h/video/upload",{method:"POST",body:a});if(!b.ok)throw new Error("Failed to upload video to Cloudinary");const f=(await b.json()).secure_url,y=N(A,"client_web",t,"ads_client"),v={companyName:d,adFileUrl:f,schedule:r,address:o,createdAt:S.now(),expiryDate:new Date(r)};await C(y,v),n(""),c(null),u(""),p(""),alert("Ad successfully uploaded!")}catch(a){console.error("Error uploading ad:",a),alert("Failed to upload advertisement. Please try again.")}finally{m(!1)}else alert("Please fill all required fields.")};return e.jsxs("div",{className:`min-h-screen relative transition-all duration-300 ${g?"pl-5":"pl-0"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center z-0",style:{backgroundImage:"url('../../../../assets/geo.jpg')"}}),e.jsx("div",{className:"absolute inset-0 bg-black opacity-70 z-0"}),e.jsxs("div",{className:"relative z-10 p-5",children:[e.jsx("header",{className:"flex justify-center items-center bg-white text-blue-900 p-5 rounded-lg shadow-md",children:e.jsx("h1",{className:"text-2xl font-bold",children:"Advertisement Management"})}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mt-5 border border-gray-300",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Upload New Advertisement"}),e.jsx("input",{type:"text",placeholder:"Enter Company Name",value:d,onChange:t=>n(t.target.value),className:"w-full p-3 border border-gray-400 rounded mt-2 text-black",disabled:s}),e.jsx("input",{type:"file",onChange:t=>c(t.target.files[0]),className:"w-full p-3 border border-gray-400 rounded mt-2 text-black",disabled:s}),e.jsx("input",{type:"text",placeholder:"Business Address",value:o,onChange:t=>p(t.target.value),className:"w-full p-3 border border-gray-400 rounded mt-2 text-black",disabled:s}),e.jsx("input",{type:"date",value:r,onChange:t=>u(t.target.value),className:"w-full p-3 border border-gray-400 rounded mt-2 text-black",disabled:s}),e.jsx("button",{onClick:x,className:`w-full mt-4 bg-blue-900 text-white p-3 rounded shadow-md hover:bg-blue-800 transition ${s?"opacity-70 cursor-not-allowed":""}`,disabled:s,children:s?"Uploading...":"Submit Ad"}),s&&e.jsx("p",{className:"text-center text-sm text-blue-900 mt-2",children:"Please wait, your ad is being uploaded..."})]})]})]})});export{I as default};
