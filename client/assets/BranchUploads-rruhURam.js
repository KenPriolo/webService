import{w as v}from"./with-props-DbFBUsUC.js";import{r as s,l as e}from"./chunk-K6CSEXPM-DdwNiGzb.js";import{c as w,b as k,f as A}from"./firebaseConfig-BRVrc43n.js";import{g as S,o as D}from"./index-e84cf44d-CdAT_r-a.js";const O=v(function(){var h;const[i,x]=s.useState(""),[g,m]=s.useState([]),[a,o]=s.useState(null),[n,u]=s.useState(""),[b,c]=s.useState(!0),[y,f]=s.useState(!0);s.useEffect(()=>{o(null),x(""),m([]),c(!0)},[n]),s.useEffect(()=>{const t=S(),r=D(t,d=>{d?u(d.uid):(console.log("User not logged in"),u("")),f(!1)});return()=>r()},[]),s.useEffect(()=>{n?(async()=>{try{c(!0);const r=w(k,"client_web",n,"ads_client"),N=(await A(r)).docs.map(l=>({id:l.id,...l.data(),companyName:l.data().companyName||"No company name",address:l.data().address||"No address",adFileUrl:l.data().adFileUrl||"",createdAt:l.data().createdAt||null,expiryDate:l.data().expiryDate||null,done:l.data().done||!1}));m(N)}catch(r){console.error("Error fetching ads:",r)}finally{c(!1)}})():c(!1)},[n]);const p=g.filter(t=>(t.companyName||"").toLowerCase().includes(i.toLowerCase())),j=t=>{o(t)};return y?e.jsx("div",{className:"bg-gray-100 min-h-screen p-5 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xl",children:"Checking authentication..."})})}):b?e.jsx("div",{className:"bg-gray-100 min-h-screen p-5 flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xl",children:"Loading your advertisements..."})})}):e.jsxs("div",{className:"bg-gray-100 min-h-screen p-5",children:[e.jsx("header",{className:"flex justify-center items-center bg-gray-900 text-white p-5 rounded-lg shadow-md",children:e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Uploaded Advertisements"})}),e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-md mt-5",children:[e.jsx("input",{type:"text",placeholder:"Search by Company Name...",value:i,onChange:t=>x(t.target.value),className:"w-full p-3 border border-gray-400 rounded mb-4 text-black shadow-sm"}),e.jsx("h3",{className:"text-lg font-semibold text-black mb-3",children:"List of Uploaded Ads"}),e.jsxs("div",{className:"grid grid-cols-6 gap-2 bg-gray-200 p-3 rounded-lg font-semibold text-black",children:[e.jsx("span",{children:"Company Name"}),e.jsx("span",{children:"Video Ad"}),e.jsx("span",{children:"Location"}),e.jsx("span",{children:"Schedule"}),e.jsx("span",{children:"Expiry"}),e.jsx("span",{children:"Status"})]}),e.jsx("ul",{className:"space-y-3 mt-2",children:p.length===0?e.jsx("p",{className:"p-4 text-center text-gray-500",children:n?"No ads found for your account.":"Please log in to view ads."}):p.map(t=>{var r;return e.jsxs("li",{className:"grid grid-cols-6 gap-2 p-4 rounded-lg shadow-md bg-white hover:bg-gray-100 transition-all cursor-pointer items-center",onClick:()=>j(t),children:[e.jsx("span",{className:"font-bold text-black truncate",children:t.companyName}),e.jsx("span",{className:"text-black",children:t.adFileUrl?e.jsx("a",{href:t.adFileUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",onClick:d=>d.stopPropagation(),children:"View"}):"N/A"}),e.jsx("span",{className:"text-black truncate",children:t.address}),e.jsx("span",{className:"text-black",children:((r=t.createdAt)==null?void 0:r.toDate().toLocaleDateString())||"N/A"}),e.jsx("span",{className:"text-black",children:t.expiryDate?new Date(t.expiryDate.seconds*1e3).toLocaleDateString():"N/A"}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full text-center ${t.done?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:t.done?"Approved":"Pending"})]},t.id)})})]}),a&&e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-md mt-5",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-black",children:"Advertisement Details"}),e.jsx("button",{onClick:()=>o(null),className:"text-gray-500 hover:text-gray-700",children:"Close"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),e.jsx("input",{type:"text",value:a.companyName,readOnly:!0,className:"w-full p-3 border border-gray-300 rounded bg-gray-50 text-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Video URL"}),e.jsx("input",{type:"text",value:a.adFileUrl,readOnly:!0,className:"w-full p-3 border border-gray-300 rounded bg-gray-50 text-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),e.jsx("input",{type:"text",value:a.address,readOnly:!0,className:"w-full p-3 border border-gray-300 rounded bg-gray-50 text-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload Date"}),e.jsx("input",{type:"text",value:((h=a.createdAt)==null?void 0:h.toDate().toLocaleString())||"N/A",readOnly:!0,className:"w-full p-3 border border-gray-300 rounded bg-gray-50 text-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),e.jsx("input",{type:"text",value:a.expiryDate?new Date(a.expiryDate.seconds*1e3).toLocaleString():"N/A",readOnly:!0,className:"w-full p-3 border border-gray-300 rounded bg-gray-50 text-black"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("input",{type:"text",value:a.done?"Approved":"Pending",readOnly:!0,className:`w-full p-3 border rounded ${a.done?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`})]})]}),a.adFileUrl&&e.jsx("div",{className:"mt-4",children:e.jsx("a",{href:a.adFileUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-block bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition",children:"View Full Ad"})})]})]})});export{O as default};
